<h1><%= @user.name %></h1>


<div class="row">
  <% @user.pictures.each do |picture| %>
<div class="col-sm-6 col-md-4">
        <div class="thumbnail">
          <%= image_tag(picture.image_url(:large)) %>
          <div class="caption">
            <p>Title: <%= picture.title %></p>
            <p>Rating: <%= picture.total_raiting %></p>
            <%= link_to 'Edit', edit_picture_path(picture) if can? :manage, :all, class: 'btn btn-default' %>
            <h2><%= link_to 'Comments', '#comment-section', id: 'comments-link', data: {toggle: "collapse"}, class: "btn btn-info" %></h2>
            <div id="comment-section" class="panel-collapse collapse">
              <div class="list-group">
                <% picture.comments.each do |comment| %>
                    <ol id="comments" class="list-group-item-text">
                      <strong>Author: </strong> <%= comment.user.name %><br>
                      <%= comment.raiting %> <br>
                      <%= comment.text %> <br>
                      ____________________________________
                    </ol>
                <% end %>
              </div>

              <h3>Add a comment:</h3>
              <%= simple_form_for [picture, picture.comments.build] do |f| %>
                  <%= f.error_notification %>

                  <div class="form-inputs">
                    <%= f.input :raiting, as: :radio_buttons, :collection => [ ['1', 1], ['2', 2], ['3', 3], ['4', 4], ['5', 5] ], :checked => ['1', 1] %>
                    <%= f.input :user_id, value: current_user.id %>
                    <%= f.hidden_field :picture_id, value: picture.id %>
                    <%= f.input :text %>
                  </div>

                  <div class="form-actions">
                    <%= f.button :submit %>
                  </div>
              <% end %>
            </div>
          </div>
        </div>
  </div>
  <% end %>

</div>

